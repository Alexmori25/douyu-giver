<div align="center">
<h1 align="center">
DouYu-Helper
</h1>

ä¸€ä¸ªåŸºäº GitHub Actions çš„æ–—é±¼è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œæ”¯æŒæ¯æ—¥è‡ªåŠ¨é¢†ç¤¼ç‰©ã€è‡ªå®šä¹‰èµ é€ç­–ç•¥åŠ Cookie è‡ªåŠ¨ä¿æ´»ã€‚
</div>

## å·¥å…·ç®€ä»‹
åˆ©ç”¨ Github Action å®ç°æ–—é±¼TVè‡ªåŠ¨è·å–æ¯æ—¥ç²‰ä¸è§å…‰æ£’ï¼Œå¹¶è‡ªåŠ¨èµ é€ç»™æŒ‡å®šä¸»æ’­ã€‚
**ç‰¹è‰²åŠŸèƒ½ï¼šé…å¥—æµè§ˆå™¨æ’ä»¶å®ç°ä¸€é”®åŒæ­¥/è‡ªåŠ¨æ›´æ–° Cookieï¼Œå½»åº•è§£å†³æ‰‹åŠ¨æŠ“åŒ…çš„ç¹æ¼ï¼**

## åŠŸèƒ½åˆ—è¡¨
* [x] **æ¯å‘¨æ—¥è‡ªåŠ¨æ‰§è¡Œ** (é»˜è®¤æ¸…ç©ºæ‰€æœ‰èƒŒåŒ…ç¤¼ç‰©)
* [x] **é…å¥—æ’ä»¶ä¸€é”®åŒæ­¥ Cookie** (æ”¯æŒè‡ªåŠ¨/æ‰‹åŠ¨æ¨¡å¼ï¼Œå…æŠ“åŒ…)
* [x] è‡ªåŠ¨è·å–æ¯æ—¥è§å…‰æ£’
* [x] è‡ªå®šä¹‰èµ é€çš„æˆ¿é—´ä¸æ•°é‡ (æ”¯æŒç™¾åˆ†æ¯”é…ç½®ï¼Œå¦‚ `100%`)
* [x] å¹³å‡åˆ†é…è§å…‰æ£’è‡³æ‹¥æœ‰ç²‰ä¸ç‰Œçš„æˆ¿é—´
* [x] æ”¯æŒæ‰€æœ‰èƒŒåŒ…ç¤¼ç‰©èµ é€ (ä¸ä»…é™äºè§å…‰æ£’)
* [x] æ¨é€æ—¥å¿— (Serveré…±/Bark)

# ç›®å½•
- [ç›®å½•](#ç›®å½•)
    - [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
      - [ä¸€ã€Actionsæ–¹å¼ (æ¨è)](#ä¸€actionsæ–¹å¼-æ¨è)
        - [1. Fork ä¸ç§æœ‰åŒ–](#1-fork-ä¸ç§æœ‰åŒ–)
        - [2. æ’ä»¶å®‰è£…ä¸é…ç½® (ç¥å™¨)](#2-æ’ä»¶å®‰è£…ä¸é…ç½®-ç¥å™¨)
        - [3. èµ é€ç­–ç•¥é…ç½®](#3-èµ é€ç­–ç•¥é…ç½®)
        - [4. å¼€å¯è‡ªåŠ¨è¿è¡Œ](#4-å¼€å¯è‡ªåŠ¨è¿è¡Œ)
      - [äºŒã€æœ¬åœ°æ‰§è¡Œ](#äºŒæœ¬åœ°æ‰§è¡Œ)

## ä½¿ç”¨è¯´æ˜

### ä¸€ã€Actionsæ–¹å¼ (æ¨è)

#### 1. Fork ä¸ç§æœ‰åŒ–
1. **Fork æœ¬é¡¹ç›®** åˆ°ä½ çš„ GitHub ä»“åº“ã€‚
2. **é‡è¦ï¼š** ä¸ºäº†ä¿æŠ¤ä½ çš„ Cookie å®‰å…¨ï¼Œè¯·åŠ¡å¿…å°† Fork åçš„ä»“åº“è®¾ç½®ä¸º **Private (ç§æœ‰)**ã€‚
   * è¿›å…¥ä»“åº“ `Settings` -> `General` -> åº•éƒ¨ `Change visibility` -> æ”¹ä¸º `Private`ã€‚

#### 2. æ’ä»¶å®‰è£…ä¸é…ç½® (ç¥å™¨)
æ— éœ€ç¹ççš„æ‰‹åŠ¨æŠ“åŒ…ï¼Œä½¿ç”¨æœ¬é¡¹ç›®é…å¥—çš„ Tampermonkey è„šæœ¬ï¼Œä¸€é”®æŠŠ Cookie åŒæ­¥åˆ°ä½ çš„ç§æœ‰ä»“åº“ï¼

1. **è·å– GitHub Token**
   * è®¿é—® [GitHub Settings -> Developer settings -> Tokens (classic)](https://github.com/settings/tokens)ã€‚
   * ç‚¹å‡» `Generate new token (classic)`ã€‚
   * **Note**: éšä¾¿å¡«ï¼Œä¾‹å¦‚ "Douyu"ã€‚
   * **Expiration**: å»ºè®®é€‰æ‹© `No expiration` (æ°¸ä¸è¿‡æœŸ)ã€‚
   * **Select scopes**: **å¿…é¡»å‹¾é€‰ `repo`** (Full control of private repositories)ã€‚
   * ç‚¹å‡»åº•éƒ¨ `Generate token`ï¼Œ**å¤åˆ¶ç”Ÿæˆçš„ Token**ã€‚

2. **å®‰è£…è„šæœ¬**
   * æµè§ˆå™¨å®‰è£… [Tampermonkey (ç¯¡æ”¹çŒ´)](https://www.tampermonkey.net/) æ’ä»¶ã€‚
   * ç‚¹å‡» Tampermonkey å›¾æ ‡ -> `æ·»åŠ æ–°è„šæœ¬`ã€‚
   * å°†æœ¬é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ [`tampermonkey_script.js`](./tampermonkey_script.js) çš„**å…¨éƒ¨å†…å®¹**å¤åˆ¶å¹¶è¦†ç›–è¿›å»ã€‚
   * æŒ‰ `Ctrl+S` ä¿å­˜ã€‚

3. **ä¸€é”®åŒæ­¥**
   * æ‰“å¼€ [æ–—é±¼å®˜ç½‘](https://www.douyu.com) å¹¶ç™»å½•ä½ çš„è´¦å·ã€‚
   * ç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’çš„ Tampermonkey å›¾æ ‡ï¼Œé€‰æ‹© **Douyu-Helper** ä¸‹çš„ `âš™ï¸ è®¾ç½®`ã€‚
   * è¾“å…¥ç¬¬ 1 æ­¥è·å–çš„ **Token** å’Œä½ çš„ **ä»“åº“è·¯å¾„** (æ ¼å¼ï¼š`ç”¨æˆ·å/ä»“åº“å`ï¼Œä¾‹å¦‚ `david/douyu_helper`)ã€‚
   * é…ç½®å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å°† Cookie ä¸Šä¼ åˆ°ä½ ä»“åº“çš„ `.github/douyu_cookie.txt` æ–‡ä»¶ä¸­ã€‚
   * **æ—¥å¸¸ä¿æ´»**ï¼šä»¥ååªè¦ä½ æ‰“å¼€æ–—é±¼çœ‹ç›´æ’­ï¼Œè„šæœ¬ä¼šæ¯å¤©è‡ªåŠ¨é™é»˜æ£€æŸ¥å¹¶æ›´æ–°ä¸€æ¬¡ Cookieï¼Œå½»åº•è§£æ”¾åŒæ‰‹ï¼

#### 3. èµ é€ç­–ç•¥é…ç½®
ä¿®æ”¹ `config/config.ini` æ–‡ä»¶ï¼Œè®¾ç½®ä½ æƒ³è¦èµ é€çš„æˆ¿é—´å·ã€‚

*é»˜è®¤é…ç½®ï¼šæ¯å‘¨æ—¥æ¸…ç©ºæ‰€æœ‰ç¤¼ç‰©ç»™æˆ¿é—´ 36252ã€‚*

```ini
[Modechoose]
giveMode = 1  # 1ä¸ºè‡ªå®šä¹‰æ¨¡å¼ï¼Œ0ä¸ºå¹³å‡åˆ†é…

[gift]
giftType = all # èµ é€æ‰€æœ‰èƒŒåŒ…ç¤¼ç‰© (åŒ…æ‹¬è§å…‰æ£’ã€å¼±é¸¡ç­‰)

[selfMode]
roomId = 36252  # æ¥æ”¶ç¤¼ç‰©çš„æˆ¿é—´å·
giftCount = 100% # èµ é€æ•°é‡ï¼šæ”¯æŒç™¾åˆ†æ¯”(100%)æˆ–å…·ä½“æ•°å€¼(100)
```

#### 4. å¼€å¯è‡ªåŠ¨è¿è¡Œ
1. **å¼€å¯ Actions**
   Fork ä»“åº“åï¼ŒActions é»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚è¯·è¿›å…¥ä»“åº“çš„ `Actions` é¡µé¢ï¼Œç‚¹å‡»ç»¿è‰²çš„æŒ‰é’® `I understand my workflows, go ahead and enable them`ã€‚
2. **æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡**
   åœ¨ Actions é¡µé¢å·¦ä¾§é€‰æ‹© `Weekly Donate DouYu Gifts` -> å³ä¾§ç‚¹å‡» `Run workflow` -> `Run workflow`ã€‚
   * ç­‰å¾…è¿è¡Œå®Œæˆï¼ˆçº¦1åˆ†é’Ÿï¼‰ï¼Œæ£€æŸ¥è¿è¡Œç»“æœæ˜¯å¦æˆåŠŸã€‚
3. **è‡ªåŠ¨è®¡åˆ’**
   é»˜è®¤é…ç½®ä¸º **æ¯å‘¨æ—¥æ™šä¸Š 23:00 (åŒ—äº¬æ—¶é—´)** è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€é¢å¤–æ“ä½œã€‚

---

### äºŒã€æœ¬åœ°æ‰§è¡Œ

å¦‚æœä½ æœ‰æœåŠ¡å™¨æˆ–é•¿æœŸå¼€æœºçš„è®¾å¤‡ (å¦‚ NASã€æ ‘è“æ´¾)ï¼Œä¹Ÿå¯ä»¥æœ¬åœ°è¿è¡Œã€‚

1. Clone ä»£ç åˆ°æœ¬åœ°ã€‚
2. å®‰è£…ä¾èµ–: `pip install -r requirements.txt`
3. é…ç½®ç¯å¢ƒå˜é‡: `export COOKIES='ä½ çš„å®Œæ•´cookieå­—ç¬¦ä¸²'`
    * æˆ–è€…ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª `douyu_cookie.txt` æ–‡ä»¶ï¼Œå°† Cookie ç²˜è´´è¿›å»ã€‚
4. è¿è¡Œ: `python main.py`

---

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆè¦ä¸Šä¼ æ–‡ä»¶è€Œä¸æ˜¯ç”¨ Secrets?**
A: GitHub çš„ Secrets API å¼ºåˆ¶è¦æ±‚åŠ å¯†ä¸Šä¼ ï¼Œè¿™åœ¨æµè§ˆå™¨è„šæœ¬ä¸­å¾ˆéš¾ç¨³å®šå®ç°ï¼ˆå¸¸å› ç½‘ç»œé—®é¢˜æŠ¥é”™ï¼‰ã€‚ä¸ºäº†æœ€æè‡´çš„ç¨³å®šä½“éªŒï¼Œæˆ‘ä»¬æ”¹ä¸ºä¸Šä¼ åˆ°ä»“åº“çš„ç§æœ‰æ–‡ä»¶ï¼ŒAction è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ä¼˜å…ˆè¯»å–è¯¥æ–‡ä»¶ã€‚
**å®‰å…¨è­¦å‘Šï¼š** è¯·åŠ¡å¿…å°†ä½ çš„ä»“åº“è®¾ä¸º **Private (ç§æœ‰)**ï¼Œå¦åˆ™ä½ çš„ Cookie æ–‡ä»¶ä¼šè¢«æ‰€æœ‰äººçœ‹åˆ°ï¼

**Q: è‡ªåŠ¨åŒæ­¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: è„šæœ¬èœå•é‡Œæä¾›äº† `ğŸ“‹ æ‰‹åŠ¨ç²˜è´´ Cookie` åŠŸèƒ½ã€‚åœ¨ F12 -> Network ä¸­éšä¾¿æ‰¾ä¸ªè¯·æ±‚å¤åˆ¶ `Cookie` å­—æ®µï¼Œç²˜è´´è¿›å»ï¼Œè„šæœ¬ä¼šå¸®ä½ å®Œæˆ Base64 ç¼–ç å¹¶ä¸Šä¼ ã€‚

è¯·å„ä½ä½¿ç”¨ Actions æ—¶åŠ¡å¿…éµå®ˆ Github æ¡æ¬¾ã€‚ä¸è¦æ»¥ç”¨ Actions æœåŠ¡ã€‚

Please be sure to abide by the Github terms when using Actions. Do not abuse the Actions service.
