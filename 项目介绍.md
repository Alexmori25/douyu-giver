# DouYu-Helper 项目介绍

## 1. 项目概述
**DouYu-Helper** 是一个基于 Python 开发的自动化工具，旨在帮助斗鱼 TV 用户自动领取每日的粉丝荧光棒，并根据用户配置的策略自动赠送给指定的主播直播间。该项目主要利用 GitHub Actions 实现每日定时任务，同时也支持本地运行。

## 2. 核心功能
*   **自动领取**: 每日自动领取斗鱼粉丝荧光棒。
*   **自动赠送**: 支持两种赠送模式：
    *   **平均分配 (Mode 0)**: 将拥有的荧光棒平均分配给所有拥有粉丝牌的直播间。
    *   **自选模式 (Mode 1)**: 根据配置文件中指定的房间号和数量进行精确赠送。
*   **登录检查**: 自动验证 Cookies 是否有效，防止因 Cookie 过期导致任务失败。
*   **消息推送**: 支持 Server酱 (Turbo版) 和 Bark 的消息推送，任务完成后将执行结果发送给用户。
*   **定时执行**: 默认配置为每天上午 9 点（北京时间）通过 GitHub Actions 自动触发。

## 3. 技术栈
*   **编程语言**: Python 3
*   **主要依赖库**:
    *   `requests`: 用于处理 HTTP 请求，模拟斗鱼 API 调用。
    *   `lxml`: 用于解析 HTML 内容。
    *   `selenium`: (依赖列表中包含，可能用于辅助登录或复杂交互)。
    *   `loguru`: 提供优雅的日志记录功能。
    *   `jsonpath`: 用于处理 JSON 数据提取。
*   **运行环境**: GitHub Actions (推荐) / Linux / Windows

## 4. 项目结构
```text
douyu_helper/
├── common/                 # 公共模块目录
│   ├── config.py           # 配置文件读取逻辑
│   ├── douyu_request.py    # 斗鱼 API 请求封装
│   ├── dy_badge.py         # 粉丝牌与房间列表管理
│   ├── dy_glows.py         # 荧光棒领取与赠送逻辑
│   ├── get_secrets.py      # 环境变量(Secrets)获取
│   ├── logger.py           # 日志配置
│   ├── login_check.py      # 登录状态检查
│   └── send_message.py     # 消息推送模块
├── config/
│   └── config.ini          # 用户配置文件 (赠送模式、房间号等)
├── docs/                   # 文档与图片资源
├── log/                    # 日志文件目录
├── main.py                 # 程序主入口
├── requirements.txt        # Python 依赖列表
└── README.md               # 项目说明文档
```

## 5. 使用流程

### 方式一：GitHub Actions (推荐)
1.  **Fork** 本项目到自己的 GitHub 仓库。
2.  获取斗鱼账号的 **COOKIES**（通过浏览器开发者工具）。
3.  在 GitHub 仓库的 Settings -> Secrets 中添加 `COOKIES`。
    *   可选添加 `SERVERPUSHKEY` (Server酱) 或 `BARKURL` (Bark) 用于接收通知。
4.  修改 `config/config.ini` 配置赠送模式。
5.  启用 GitHub Actions，任务将按计划自动运行。

### 方式二：本地运行
1.  克隆代码到本地。
2.  安装依赖：`pip install -r requirements.txt`。
3.  设置环境变量 `COOKIES` (以及可选的推送 Key)。
4.  修改 `config/config.ini`。
5.  运行脚本：`python main.py`。

## 6. 注意事项
*   **Cookie 有效期**: 斗鱼的 Token 通常约一周失效，需要定期更新 Secrets 中的 COOKIES。
*   **账号安全**: 用户的 COOKIES 包含敏感登录信息，请勿泄露给他人。
*   **GitHub 规则**: 请遵守 GitHub Actions 的使用条款，避免滥用资源。

---
*该文档根据项目代码及 README 生成，旨在帮助开发者和用户快速理解项目结构与功能。*





